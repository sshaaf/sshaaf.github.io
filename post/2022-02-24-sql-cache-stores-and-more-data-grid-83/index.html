<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="Shaaf, Syed's blog"><meta property="og:type" content="article"><meta property="og:image" content="https://shaaf.dev/images/fano-summer.jpeg"><meta property="twitter:image" content="https://shaaf.dev/images/fano-summer.jpeg"><meta name=title content="SQL cache stores and more in Data Grid 8.3"><meta property="og:title" content="SQL cache stores and more in Data Grid 8.3"><meta property="twitter:title" content="SQL cache stores and more in Data Grid 8.3"><meta name=description content="A technical blog about Java, Kubernetes and things that matter"><meta property="og:description" content="A technical blog about Java, Kubernetes and things that matter"><meta property="twitter:description" content="A technical blog about Java, Kubernetes and things that matter"><meta property="twitter:card" content="summary"><meta name=keyword content="Java, developers, devops, , kubernetes, redhat, Shaaf Blog, Web, keycloak, PaaS, Istio, Kubernetes, infinispan, Microservice"><link rel="shortcut icon" href=/img/favicon.ico><title>SQL cache stores and more in Data Grid 8.3 | A developers blog | Shaaf, Syed Blog</title><link rel=canonical href=/post/2022-02-24-sql-cache-stores-and-more-data-grid-83/><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link href=https://cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@5.15.1/css/all.css rel=stylesheet type=text/css><script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js></script>
<script src=/js/hux-blog.min.js></script>
<script src=/js/lazysizes.min.js></script></head><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-58961685-1","auto"),ga("send","pageview"))</script><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=/>Shaaf, Syed's blog</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>All Posts</a></li><li><a href=/archive/>ARCHIVE</a></li><li><a href=/about/>ABOUT</a></li><li><a href=/search><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(/images/fano-summer.jpeg)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/java title=java>java</a>
<a class=tag href=/tags/cache title=cache>cache</a>
<a class=tag href=/tags/redhat title=redhat>redhat</a>
<a class=tag href=/tags/programming title=programming>programming</a>
<a class=tag href=/tags/infinispan title=infinispan>infinispan</a></div><h1>SQL cache stores and more in Data Grid 8.3</h1><h2 class=subheading></h2><span class=meta>Posted by
Shaaf, Syed's blog
on
Thursday, February 24, 2022</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><blockquote><p><em>Orignally posted at</em> <a href=https://developers.redhat.com/articles/2022/02/24/sql-cache-stores-and-more-data-grid-83>Red Hat Developers</a></p></blockquote><p><a href=https://developers.redhat.com/products/datagrid/overview>Red Hat Data Grid</a> is a distributed, cloud-based datastore offering very fast response times as an in-memory database. The latest version, Data Grid 8.3, features cross-site replication with more observability and two new types of SQL cache store for scaling applications with large datasets. This version also brings improved security, support for Helm charts, and a better command-line interface (CLI).</p><p>This article is an overview of new features and enhancements in this latest version of Red Hat Data Grid.</p><h2 id=cross-site-replication-with-more-observability><strong>Cross-site replication with more observability</strong></h2><p>With the latest Data Grid release, you can track cross-site replication operations for each of the backup locations and their caches, including response times and the number of RELAY messages exchanged, as shown in Figure 1.</p><p><figure><img src=https://developers.redhat.com/sites/default/files/repl.png alt=alt_text>
<center><figcaption>image_tooltip</figcaption></center></figure></p><p>Figure 1. Cross-site replication involves messages at many different levels.</p><p>We have also enabled access to the data via the CLI, the REST API, and Java Management Extensions (JMX) to offer a better user experience to cluster operators. Cross-site replication is also more transparent and observable due to dedicated, operator-managed pods for routing cross-site replication requests.</p><p>Data Grid operators can also configure the number of relay nodes for cross-site replication. This flexibility enhances the cache&rsquo;s scalability and performance over multiple sites.</p><p>Finally, security is of paramount importance for a cross-site cluster, so we have enabled TLS security for router-based cross-site replication. (Scroll down for more about security enhancements in a later section.)</p><h2 id=scaling-with-sql-cache-stores><strong>Scaling with SQL cache stores</strong></h2><p>What do you do if you have a lot of data in a database and want to load the data into the cache? Database schemas can be complex and users might want to define how that data is queried through operations such as SELECT, INSERT, and so on. Perhaps you would also like to support write-through and write-back operations. All of this makes for a complex scenario.</p><p>In this release, we have added two types of SQL cache store:</p><ul><li>Table cache store: Loads all data from a single table. Only the table name is required.</li><li>Query cache store: Loads data based on SQL queries.</li></ul><p>Useful things you can do with the new SQL cache stores include the following:</p><ul><li>Pre-load data from an existing database.</li><li>Expose cache data with a user-defined schema.</li><li>Allow read and write operations.</li><li>Configure the cache store as read-only, and act as a cache loader.</li><li>Configure the cache store to load values on startup.</li><li>Use the cache store with composite keys and values through the <a href=https://developers.google.com/protocol-buffers>protocol buffers (protobuf) schema</a>.</li><li>With the query cache store, use arbitrary select, select all, delete, delete all, and upsert operations.</li></ul><p>To set up a cache store, you simply need to drop the database drivers into the server, which can be done with the <a href=https://developers.redhat.com/articles/2022/02/24/sql-cache-stores-and-more-data-grid-83>Operator</a> custom resource (CR) on <a href=https://developers.redhat.com/openshift>Red Hat OpenShift</a>. After that, users should be able to create SQL cache stores via YAML, JSON, or XMLâ€”also a new configuration feature. An <a href=https://github.com/redhat-mw-demos/infinispan-sqlstore-demo>example using Infinispan and the Quarkus Java framework</a> is available on GitHub.</p><h2 id=more-security-enhancements><strong>More security enhancements</strong></h2><p>Data Grid now provides full support for TLS version 1.3 with OpenSSL native acceleration. We have also increased the flexibility and convenience of security in Data Grid 8.3.</p><h3 id=multiple-realms><strong>Multiple realms</strong></h3><p>You can combine multiple security realms into a single realm. When authenticating users, Data Grid Server checks each security realm in turn until it finds one that can perform the authentication.</p><p>The following example security realm includes an LDAP realm and a property realm, along with the <code>distributed-realm</code> element:</p><pre tabindex=0><code>&lt;security-realms&gt;
   &lt;security-realm name=&#34;my-distributed-realm&#34;&gt;
      &lt;ldap-realm&gt;
         &lt;!-- LDAP realm configuration. --&gt;
      &lt;/ldap-realm&gt;
      &lt;properties-realm&gt;
         &lt;!-- Property realm configuration. --&gt;
      &lt;/properties-realm&gt;
      &lt;distributed-realm/&gt;
   &lt;/security-realm&gt;
&lt;/security-realms&gt;
</code></pre><h3 id=multiple-endpoints><strong>Multiple endpoints</strong></h3><p>Users can now also configure multiple endpoints and define separate security realms for them. This enhancement enables more flexible and secure use.</p><p>The following example contains two different endpoint configurations. One endpoint binds to a <code>public</code> socket, uses an <code>application</code> security realm, and disables administrative features. Another endpoint binds to a <code>private</code> socket, uses a <code>management</code> security realm, and enables administrative features:</p><pre tabindex=0><code>&lt;endpoints&gt;
  &lt;endpoint socket-binding=&#34;public&#34;
            security-realm=&#34;application&#34;
            admin=&#34;false&#34;&gt;
    &lt;hotrod-connector/&gt;
    &lt;rest-connector/&gt;
  &lt;/endpoint&gt;
  &lt;endpoint socket-binding=&#34;private&#34;
            security-realm=&#34;management&#34;&gt;
    &lt;hotrod-connector/&gt;
    &lt;rest-connector/&gt;
  &lt;/endpoint&gt;
&lt;/endpoints&gt;
</code></pre><h3 id=pem-files><strong>PEM files</strong></h3><p>Users can now add PEM files directly to their Data Grid Server configuration and use them as trust stores and keystores in a TLS server identity.</p><pre><code>Note: See the [Data Grid Security Guide](https://access.redhat.com/documentation/en-us/red_hat_data_grid/8.3/html-single/data_grid_security_guide/) and [Distributed security realms](https://access.redhat.com/documentation/en-us/red_hat_data_grid/8.3/html-single/data_grid_server_guide#distributed-security-realms_security-realms) to learn more about new security features in Data Grid 8.3.
</code></pre><h2 id=deploy-data-grid-with-helm-charts><strong>Deploy Data Grid with Helm charts</strong></h2><p>Developers who use <a href=https://helm.sh/>Helm charts</a> for application deployment can now use this convenient mechanism to install Data Grid. You can use charts to deploy Data Grid instances, configure clusters, add authentication and authorization, add network access via routes and node ports, enable load balancers, and more, using the Data Grid portal (Figure 2) or the CLI.</p><p><figure><img src="https://developers.redhat.com/sites/default/files/styles/article_full_width_1440px_w/public/helm_0.png?itok=1XGArnkV" alt=alt_text>
<center><figcaption>image_tooltip</figcaption></center></figure></p><p>Figure 2. Helm charts can be invoked through the Data Grid graphical interface.</p><pre><code>**Note:** Using Helm charts is intended for sites where the Data Grid Operator is not available and operators must configure, deploy, and manage the cluster manually.
</code></pre><h2 id=cli-improvements><strong>CLI improvements</strong></h2><p>Data Grid 8.3 has a few updates for developers who prefer working on the command line. For one, you can enable and disable rebalancing of the cluster, track and extract more details about cross-site replication relay nodes, and manage cache availability. Additionally, if you use the general <code>oc</code> OpenShift command, you can now also <a href=https://access.redhat.com/documentation/en-us/red_hat_data_grid/8.3/guide/d510c8ad-e097-4a3e-af55-e1d7967ecac3>install</a> the Infinispan extension and use it with <code>oc</code>, as shown in Figure 3.</p><p><figure><img src="https://developers.redhat.com/sites/default/files/styles/article_full_width_1440px_w/public/control.png?itok=heoMJq24" alt=alt_text>
<center><figcaption>image_tooltip</figcaption></center></figure></p><p>Figure 3. You can control a Data Grid cluster from the command line.</p><h2 id=usability-improvements><strong>Usability improvements</strong></h2><p>We&rsquo;ve made a few more improvements to increase the usability of Data Grid in this release:</p><ul><li>Data Grid 8.3 has full support for <a href=https://developers.redhat.com/articles/2021/12/14/explore-java-17-language-features-quarkus>Java 17</a> for embedded and remote caches.</li><li>You can automatically migrate any file-store configuration during the upgrade to Data Grid 8.3.</li><li>You can now delete entries with the <a href=https://access.redhat.com/documentation/ru-ru/red_hat_data_grid/7.1/html/developer_guide/building_ickle_query>Ickle programming language</a>:</li><li>query.create("DELETE FROM books WHERE page_count > 500").executeStatement();</li><li>Copy snippet</li><li>Hot Rod migration is simpler when upgrading clusters of server nodes between versions and handles configuration changes transparently.</li></ul><h2 id=strongget-started-with-data-grid-83strong>Get started with Data Grid 8.3</h2><p>Ready to dive in and try out Data Grid 8.3? These resources will get you started:</p><ul><li>Zip distributions are available through the <a href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?product=data.grid&downloadType=distributions">Certified Service Provider (CSP) program</a>.</li><li>Container distributions and Operators are available in the <a href=https://access.redhat.com/containers/#/product/JbossDataGrid>Red Hat Container Catalog</a>.</li><li>Product documentation is available on the <a href=https://access.redhat.com/documentation/en-us/red_hat_data_grid/8.0/>Red Hat customer portal</a>, including <a href=https://access.redhat.com/documentation/en-us/red_hat_data_grid/8.0/html/data_grid_migration_guide/>a migration guide</a> to help you migrate your existing Data Grid deployments to 8.0.</li></ul><p>Visit the <a href=https://developers.redhat.com/products/datagrid>Red Hat Data Grid</a> product page to learn more about this technology.</p><h2 id=recent-articles><strong>Recent Articles</strong></h2><ul><li><strong><a href=https://developers.redhat.com/articles/2022/02/24/inspecting-containerized-python-applications-cluster>Inspecting containerized Python applications in a cluster</a></strong></li><li><strong><a href=https://developers.redhat.com/articles/2022/02/24/sql-cache-stores-and-more-data-grid-83>SQL cache stores and more in Data Grid 8.3</a></strong></li><li><strong><a href=https://developers.redhat.com/articles/2022/02/22/debug-net-applications-running-local-containers-vs-code>Debug .NET applications running in local containers with VS Code</a></strong></li><li><strong><a href=https://developers.redhat.com/articles/2022/02/17/quality-testing-linux-kernel>Quality testing the Linux kernel</a></strong></li><li><strong><a href=https://developers.redhat.com/articles/2022/02/16/code-specialization-mir-lightweight-jit-compiler>Code specialization for the MIR lightweight JIT compiler</a></strong></li></ul><h2 id=related-content><strong>Related Content</strong></h2><ul><li><strong><a href=https://developers.redhat.com/blog/2018/06/26/data-grid-multi-cloud-real-time-game>Using Red Hat Data Grid to power a multi-cloud real-time game</a></strong></li><li><strong><a href=https://developers.redhat.com/blog/2017/05/30/implementing-a-log-collector-using-red-hat-jboss-fuse-and-red-hat-jboss-data-grid>Implementing a Log Collector using Red Hat JBoss Fuse and Red Hat JBoss Data Grid</a></strong></li><li><strong><a href=https://developers.redhat.com/blog/2020/06/19/develop-and-test-a-quarkus-client-on-red-hat-codeready-containers-with-red-hat-data-grid-8-0>Develop and test a Quarkus client on Red Hat CodeReady Containers with Red Hat Data Grid 8.0</a></strong></li><li><strong><a href=https://developers.redhat.com/blog/2019/03/25/five-layers-of-security-for-red-hat-data-grid-on-openshift>Five layers of security for Red Hat Data Grid on OpenShift</a></strong></li></ul><hr><ul class=pager><li class=previous><a href=/post/2022-01-27-whats-new-for-developers-in-java-18/ data-toggle=tooltip data-placement=top title="What's new for developers in Java 18">&larr;
Previous Post</a></li><li class=next><a href=/post/2022-04-11-processing-images-in-java-with-opencv-and-quarkus/ data-toggle=tooltip data-placement=top title="Processing images in Java with OpenCV and Quarkus">Next
Post &rarr;</a></li></ul><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//https-shaaf-dev.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5><a href=/tags/>FEATURED TAGS</a></h5><div class=tags><a href=/tags/administrator title=administrator>administrator</a>
<a href=/tags/ant title=ant>ant</a>
<a href=/tags/automation title=automation>automation</a>
<a href=/tags/build title=build>build</a>
<a href=/tags/ci title=ci>ci</a>
<a href=/tags/command title=command>command</a>
<a href=/tags/computers title=computers>computers</a>
<a href=/tags/continous title=continous>continous</a>
<a href=/tags/design title=design>design</a>
<a href=/tags/design-patterns title=design-patterns>design-patterns</a>
<a href=/tags/docker title=docker>docker</a>
<a href=/tags/engineering title=engineering>engineering</a>
<a href=/tags/fedora title=fedora>fedora</a>
<a href=/tags/gof title=gof>gof</a>
<a href=/tags/how-to title=how-to>how-to</a>
<a href=/tags/howto title=howto>howto</a>
<a href=/tags/ibm title=ibm>ibm</a>
<a href=/tags/integration title=integration>integration</a>
<a href=/tags/jacl title=jacl>jacl</a>
<a href=/tags/java title=java>java</a>
<a href=/tags/jdbc title=jdbc>jdbc</a>
<a href=/tags/jython title=jython>jython</a>
<a href=/tags/mq title=mq>mq</a>
<a href=/tags/patterns title=patterns>patterns</a>
<a href=/tags/programming title=programming>programming</a>
<a href=/tags/quarkus title=quarkus>quarkus</a>
<a href=/tags/redhat title=redhat>redhat</a>
<a href=/tags/rhel title=rhel>rhel</a>
<a href=/tags/scm title=scm>scm</a>
<a href=/tags/scripting title=scripting>scripting</a>
<a href=/tags/singleton title=singleton>singleton</a>
<a href=/tags/singleton-pattern title=singleton-pattern>singleton-pattern</a>
<a href=/tags/software title=software>software</a>
<a href=/tags/software-development title=software-development>software-development</a>
<a href=/tags/svn title=svn>svn</a>
<a href=/tags/sysadmin title=sysadmin>sysadmin</a>
<a href=/tags/tips title=tips>tips</a>
<a href=/tags/utils title=utils>utils</a>
<a href=/tags/websphere title=websphere>websphere</a>
<a href=/tags/wsadmin title=wsadmin>wsadmin</a></div></section><section><hr><h5>FRIENDS</h5><ul class=list-inline></ul></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a target=_blank href=https://github.com/sshaaf><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/shaaf/><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://stackoverflow.com/users/243185/syed-m-shaaf><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://fosstodon.org/@shaaf><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-mastodon fa-stack-1x fa-inverse"></i></span></a></li><li><a href rel=alternate type=application/rss+xml title="Shaaf, Syed's blog"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; Shaaf, Syed's blog 2023<br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function loadAsync(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(null,e)},!1),i.parentNode.insertBefore(n,i)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,a=$(_containerSelector),r=a.find("h1,h2,h3,h4,h5,h6");return $(e).html(""),r.each(function(){t=$(this).prop("tagName").toLowerCase(),o="#"+$(this).prop("id"),n=$(this).text(),i=$('<a href="'+o+'" rel="nofollow">'+n+"</a>"),s=$('<li class="'+t+'_nav"></li>').append(i),$(e).append(s)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>