<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="Shaaf, Syed's blog"><meta property="og:type" content="article"><meta property="og:image" content="https://shaaf.dev/images/fano-summer.jpeg"><meta property="twitter:image" content="https://shaaf.dev/images/fano-summer.jpeg"><meta name=title content="What's new for developers in Java 18"><meta property="og:title" content="What's new for developers in Java 18"><meta property="twitter:title" content="What's new for developers in Java 18"><meta name=description content="A technical blog about Java, Kubernetes and things that matter"><meta property="og:description" content="A technical blog about Java, Kubernetes and things that matter"><meta property="twitter:description" content="A technical blog about Java, Kubernetes and things that matter"><meta property="twitter:card" content="summary"><meta name=keyword content="Java, developers, devops, , kubernetes, redhat, Shaaf Blog, Web, keycloak, PaaS, Istio, Kubernetes, infinispan, Microservice"><link rel="shortcut icon" href=/img/favicon.ico><title>What's new for developers in Java 18 | A developers blog | Shaaf, Syed Blog</title><link rel=canonical href=/post/2022-01-27-whats-new-for-developers-in-java-18/><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link href=https://cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@5.15.1/css/all.css rel=stylesheet type=text/css><script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js></script>
<script src=/js/hux-blog.min.js></script>
<script src=/js/lazysizes.min.js></script></head><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-58961685-1","auto"),ga("send","pageview"))</script><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=/>Shaaf, Syed's blog</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>All Posts</a></li><li><a href=/archive/>ARCHIVE</a></li><li><a href=/about/>ABOUT</a></li><li><a href=/search><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(/images/fano-summer.jpeg)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/java title=java>java</a>
<a class=tag href=/tags/redhat title=redhat>redhat</a>
<a class=tag href=/tags/programming title=programming>programming</a></div><h1>What's new for developers in Java 18</h1><h2 class=subheading></h2><span class=meta>Posted by
Shaaf, Syed's blog
on
Thursday, January 27, 2022</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><blockquote><p><em>Orignally posted at</em> <a href=https://developers.redhat.com/articles/2022/01/27/whats-new-developers-java-18#>Red Hat Developers</a></p></blockquote><p>In exciting news for <a href=https://developers.redhat.com/topics/enterprise-java>Java</a> developers, Java 18 forked off from the main line <a href=https://www.infoq.com/news/2021/12/java-news-roundup-dec06-2021/>at the end of last year</a> and has entered <a href=https://openjdk.java.net/projects/jdk/18/>Rampdown Phase Two</a>. This article highlights some of the features that developers can look for in the upcoming Java 18 release, including the new simple web server module, a more sophisticated way to annotate your Javadocs, and the <code>–finalization=disabled</code> option, which lets you test how a Java application will behave when finalization is removed in a future release. See the end of the article for where to download Java 18 in early access builds.</p><h2 id=javas-new-simple-web-server><strong>Java&rsquo;s new simple web server</strong></h2><p>Java 18 will provide a minimally functional web server in the <code>jdk.httpserver</code> module. It has an API for access, as well as a binary in the <code>bin</code> directory in case you want to run the server from the command line.</p><p>The command to run the web server can be as simple as:</p><pre tabindex=0><code>$ jwebserver -b 0.0.0.0 -p 8000
</code></pre><p>Note:** For more command-line options and details about the <code>jdk.httpserver</code> module, see the <a href=https://openjdk.java.net/jeps/408>JEP 408 documentation</a>.</p><p>If you are wondering whether you can implement a full-blown production web server using the simple web server APIs, the answer is no. The web server is definitely not intended for that use. For one thing, it communicates over HTTP/1.1 and doesn&rsquo;t support PUT requests, so it doesn&rsquo;t support dynamic content. The web server is recommended for prototyping, testing, and debugging. An example code snippet with comments follows:</p><pre tabindex=0><code>import java.net.InetSocketAddress;
import java.nio.file.Path;
import com.sun.net.httpserver.SimpleFileServer;
import static com.sun.net.httpserver.SimpleFileServer.OutputLevel;

public class App {
public static void main( String[] args ){
    // Create a simple file server, given the socket address, path and output level
    var server = SimpleFileServer.createFileServer(new InetSocketAddress(8000),             Path.of(&#34;/home/java&#34;), OutputLevel.VERBOSE);

    // Starting the server
    server.start();

    // A friendly message to get started.
    System.out.println( &#34;We are getting started.. Hello World!&#34; );
  }
}
</code></pre><h2 id=code-snippets-in-java-api-documentation><strong>Code snippets in Java API documentation</strong></h2><p>Prior to Java 18, developers mostly inserted code samples in Javadoc comments using the <code>@code</code> annotation. That technique is somewhat limited and requires workarounds. For instance, it has always been difficult to validate what&rsquo;s inside the code fragment, implement syntax highlighting, and insert links or escape characters.</p><p>As a new approach, JEP 413 proposes using the <code>@snippet</code> tag. As noted in the JEP, the tag &ldquo;can be used to declare both <em>inline snippets</em>, where the code fragment is included within the tag itself, and <em>external snippets</em>, where the code fragment is read from a separate source file.&rdquo;</p><p>Here is an example of an inline snippet:</p><pre tabindex=0><code>/**
* The following code shows how to use {@code Optional.isPresent}:
* {@snippet :
* if (v.isPresent()) {
*     System.out.println(&#34;v: &#34; + v.get());
* }
* }
*/
</code></pre><p>The code lies between curly braces, where the opening brace is followed by the <code>@snippet</code> tag. The Javadoc utility now also includes options to specify links, highlight code, and more. See <a href=https://openjdk.java.net/jeps/413>JEP 413</a> for more details.</p><h2 id=utf-8-character-set-by-default><strong>UTF-8 character set by default</strong></h2><p>In prior releases, the default character set was determined when the Java runtime started, and depended on the user&rsquo;s locale and default encoding. Thus, on Windows the charset was <code>windows-1252</code>, whereas on macOS it was UTF-8 except in the POSIX C locale. With Java 18, UTF-8 will be the default for all operating systems.</p><p>You can change the default charset by setting the <code>file.encoding</code> to <code>COMPAT</code>; for instance, by running <code>java -Dfile.encoding=COMPAT</code>. This setting reverts to the algorithm in Java 17.</p><h2 id=prepare-now-for-the-removal-of-finalize><strong>Prepare now for the removal of finalize()</strong></h2><p>If you have developed Java applications, you are probably familiar with the <code>finalize()</code> method. Since Java 9, the recommendation has been to not use <code>finalize()</code>, but instead to use a <em>try-with-resources</em> statement or the new Cleaner APIs. JEP 421 helps developers prepare for the eventual removal of finalization. You can run an application with the <code>–finalization=disabled</code> option to see how it will behave without the <code>finalize()</code> method. It&rsquo;s great to see this evolution. As a developer, it is also an opportunity to take a closer look at your application&rsquo;s behavior.</p><p>**Note: **A recent <a href=https://inside.java/2022/01/12/podcast-021/>Inside Java podcast episode</a> discusses issues with finalization and what to expect in Java 18. See the documentation for <a href=https://openjdk.java.net/jeps/421>JEP 421</a> for more details.</p><h2 id=preview-features-in-java-18><strong>Preview features in Java 18</strong></h2><p>Some of the features that were included in the development phase of Java 18 are still in preview. These include the Vector API (<a href=https://openjdk.java.net/jeps/417>JEP 417</a>), which Gunnar Morling discusses in this <a href=https://developers.redhat.com/devnation/tech-talks/java17-apis>DevNation Tech Talk</a>. The foreign function and memory API (<a href=https://openjdk.java.net/jeps/419>JEP 419</a>) and pattern matching for <code>switch</code> (<a href=https://openjdk.java.net/jeps/420>JEP 420</a>) also remain in preview.</p><h2 id=where-to-download-java-18><strong>Where to download Java 18</strong></h2><p>To give Java 18 a try, you can download the early access <a href="https://adoptium.net/archive.html?variant=openjdk18&jvmVariant=hotspot">Eclipse Temurin builds</a> from Eclipse Adoptium. Temurin is the <a href=https://adoptium.net/faq.html#temurinName>name of the OpenJDK distribution</a> from Adoptium.</p><p>If you are using a current version of Java and want to compare the features with Java 18, I would also highly recommend the <a href=https://javaalmanac.io/>Java Almanac</a>. It contains a <a href=https://javaalmanac.io/jdk/18/>page listing all the new features and changes in Java 18</a>.</p><h2 id=conclusion><strong>Conclusion</strong></h2><p>This article was a quick look at some of the highlights of Java 18. Keep an eye on the <a href=https://developers.redhat.com/products/openjdk>Red Hat Developer OpenJDK page</a> for more Java 18 updates. You can also get started using the <a href=https://developers.redhat.com/products/openjdk/getting-started>Red Hat build of OpenJDK</a>.</p><hr><ul class=pager><li class=previous><a href=/post/2021-05-17-deploy-quarkus-everywhere/ data-toggle=tooltip data-placement=top title="Deploy Quarkus everywhere with Red Hat Enterprise Linux (RHEL)">&larr;
Previous Post</a></li><li class=next><a href=/post/2022-02-24-sql-cache-stores-and-more-data-grid-83/ data-toggle=tooltip data-placement=top title="SQL cache stores and more in Data Grid 8.3">Next
Post &rarr;</a></li></ul><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//https-shaaf-dev.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5><a href=/tags/>FEATURED TAGS</a></h5><div class=tags><a href=/tags/administrator title=administrator>administrator</a>
<a href=/tags/ant title=ant>ant</a>
<a href=/tags/automation title=automation>automation</a>
<a href=/tags/build title=build>build</a>
<a href=/tags/ci title=ci>ci</a>
<a href=/tags/command title=command>command</a>
<a href=/tags/computers title=computers>computers</a>
<a href=/tags/continous title=continous>continous</a>
<a href=/tags/design title=design>design</a>
<a href=/tags/design-patterns title=design-patterns>design-patterns</a>
<a href=/tags/docker title=docker>docker</a>
<a href=/tags/engineering title=engineering>engineering</a>
<a href=/tags/fedora title=fedora>fedora</a>
<a href=/tags/gof title=gof>gof</a>
<a href=/tags/how-to title=how-to>how-to</a>
<a href=/tags/howto title=howto>howto</a>
<a href=/tags/ibm title=ibm>ibm</a>
<a href=/tags/integration title=integration>integration</a>
<a href=/tags/jacl title=jacl>jacl</a>
<a href=/tags/java title=java>java</a>
<a href=/tags/jdbc title=jdbc>jdbc</a>
<a href=/tags/jython title=jython>jython</a>
<a href=/tags/mq title=mq>mq</a>
<a href=/tags/patterns title=patterns>patterns</a>
<a href=/tags/programming title=programming>programming</a>
<a href=/tags/quarkus title=quarkus>quarkus</a>
<a href=/tags/redhat title=redhat>redhat</a>
<a href=/tags/rhel title=rhel>rhel</a>
<a href=/tags/scm title=scm>scm</a>
<a href=/tags/scripting title=scripting>scripting</a>
<a href=/tags/singleton title=singleton>singleton</a>
<a href=/tags/singleton-pattern title=singleton-pattern>singleton-pattern</a>
<a href=/tags/software title=software>software</a>
<a href=/tags/software-development title=software-development>software-development</a>
<a href=/tags/svn title=svn>svn</a>
<a href=/tags/sysadmin title=sysadmin>sysadmin</a>
<a href=/tags/tips title=tips>tips</a>
<a href=/tags/utils title=utils>utils</a>
<a href=/tags/websphere title=websphere>websphere</a>
<a href=/tags/wsadmin title=wsadmin>wsadmin</a></div></section><section><hr><h5>FRIENDS</h5><ul class=list-inline></ul></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a target=_blank href=https://github.com/sshaaf><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/shaaf/><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://stackoverflow.com/users/243185/syed-m-shaaf><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://fosstodon.org/@shaaf><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-mastodon fa-stack-1x fa-inverse"></i></span></a></li><li><a href rel=alternate type=application/rss+xml title="Shaaf, Syed's blog"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; Shaaf, Syed's blog 2023<br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function loadAsync(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(null,e)},!1),i.parentNode.insertBefore(n,i)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,a=$(_containerSelector),r=a.find("h1,h2,h3,h4,h5,h6");return $(e).html(""),r.each(function(){t=$(this).prop("tagName").toLowerCase(),o="#"+$(this).prop("id"),n=$(this).text(),i=$('<a href="'+o+'" rel="nofollow">'+n+"</a>"),s=$('<li class="'+t+'_nav"></li>').append(i),$(e).append(s)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>